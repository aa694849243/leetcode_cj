# -*- coding: utf-8 -*-

# å°æ‰£å‚åŠ çš„ç§‹æ—¥å¸‚é›†æ™¯åŒºå…±æœ‰ $N$ ä¸ªæ™¯ç‚¹ï¼Œæ™¯ç‚¹ç¼–å·ä¸º $1$~$N$ã€‚æ™¯ç‚¹å†…è®¾æœ‰ $N-1$ æ¡åŒå‘é“è·¯ï¼Œä½¿æ‰€æœ‰æ™¯ç‚¹å½¢æˆäº†ä¸€ä¸ªäºŒå‰æ ‘ç»“æ„ï¼Œæ ¹ç»“ç‚¹è®°ä¸º `r
# oot`ï¼Œæ™¯ç‚¹ç¼–å·å³ä¸ºèŠ‚ç‚¹å€¼ã€‚
#
# ç”±äºç§‹æ—¥å¸‚é›†æ™¯åŒºçš„ç»“æ„ç‰¹æ®Šï¼Œæ¸¸å®¢å¾ˆå®¹æ˜“è¿·è·¯ï¼Œä¸»åŠæ–¹å†³å®šåœ¨æ™¯åŒºçš„è‹¥å¹²ä¸ªæ™¯ç‚¹è®¾ç½®å¯¼èˆªè£…ç½®ï¼ŒæŒ‰ç…§æ‰€åœ¨æ™¯ç‚¹ç¼–å·å‡åºæ’åˆ—åå®šä¹‰è£…ç½®ç¼–å·ä¸º 1 ~ Mã€‚å¯¼èˆªè£…ç½®å‘æ¸¸å®¢å‘
# é€æ•°æ®ï¼Œæ•°æ®å†…å®¹ä¸ºåˆ—è¡¨ `[æ¸¸å®¢ä¸è£…ç½® 1 çš„ç›¸å¯¹è·ç¦»,æ¸¸å®¢ä¸è£…ç½® 2 çš„ç›¸å¯¹è·ç¦»,...,æ¸¸å®¢ä¸è£…ç½® M çš„ç›¸å¯¹è·ç¦»]`ã€‚ç”±äºæ¸¸å®¢æ ¹æ®å¯¼èˆªè£…ç½®å‘é€çš„ä¿¡æ¯æ¥ç¡®è®¤
# ä½ç½®ï¼Œå› æ­¤ä¸»åŠæ–¹éœ€ä¿è¯æ¸¸å®¢åœ¨æ¯ä¸ªæ™¯ç‚¹æ¥æ”¶çš„æ•°æ®ä¿¡æ¯çš†ä¸ç›¸åŒã€‚è¯·è¿”å›ä¸»åŠæ–¹æœ€å°‘éœ€è¦è®¾ç½®å¤šå°‘ä¸ªå¯¼èˆªè£…ç½®ã€‚
#
# **ç¤ºä¾‹ 1ï¼š**
# >è¾“å…¥ï¼š`root = [1,2,null,3,4]`
# >
# >è¾“å‡ºï¼š`2`
# >
# >è§£é‡Šï¼šåœ¨æ™¯ç‚¹ 1ã€3 æˆ–æ™¯ç‚¹ 1ã€4 æˆ–æ™¯ç‚¹ 3ã€4 è®¾ç½®å¯¼èˆªè£…ç½®ã€‚
# >
# >![image.png](https://pic.leetcode-cn.com/1597996812-tqrgwu-image.png){:height
# ="250px"}
#
#
#
# **ç¤ºä¾‹ 2ï¼š**
# >è¾“å…¥ï¼š`root = [1,2,3,4]`
# >
# >è¾“å‡ºï¼š`1`
# >
# >è§£é‡Šï¼šåœ¨æ™¯ç‚¹ 3ã€4 è®¾ç½®å¯¼èˆªè£…ç½®çš†å¯ã€‚
# >
# >![image.png](https://pic.leetcode-cn.com/1597996826-EUQRyz-image.png){:height
# ="200px"}
#
#
#
# **æç¤ºï¼š**
# - `2 <= N <= 50000`
# - äºŒå‰æ ‘çš„éç©ºèŠ‚ç‚¹å€¼ä¸º `1~N` çš„ä¸€ä¸ªæ’åˆ—ã€‚
#  Related Topics æ ‘ åŠ¨æ€è§„åˆ’ äºŒå‰æ ‘
#  ğŸ‘ 8 ğŸ‘ 0


# Definition for a binary tree node.


class TreeNode:
    def __init__(self, x):
        self.val = x
        self.left = None
        self.right = None

# https://leetcode-cn.com/problems/hSRGyL/solution/tan-xin-suan-fa-zheng-ming-by-newhar/
class Solution:
    def navigation(self, root: TreeNode) -> int:
        self.ans = 0
        self.s = 1

        def dfs(node):
            if not node:
                return 0
            l, r = dfs(node.left), dfs(node.right)  # åˆ¤æ–­å·¦å³å­æ ‘æ˜¯ä¸æ˜¯ä¸‰å‰èŠ‚ç‚¹
            if node.left and node.right:  # å¿…é¡»åŒæ—¶å­˜åœ¨å·¦å³èŠ‚ç‚¹æ‰è€ƒè™‘åŠ å¯¼èˆªå™¨çš„é—®é¢˜ï¼Œè¦ä¸ç„¶ç›¸å½“äºå•é“¾äº†ï¼Œå¦‚æœä¸åŠ è¿™ä¸ªæ¡ä»¶ï¼Œæœ«ç«¯èŠ‚ç‚¹ä¹Ÿ+1äº†
                if not l and not r:  # åªæœ‰å·¦å³å­æ ‘éƒ½è¿”å›0æ—¶æ‰+1ï¼Œå› ä¸ºå¦‚æœå·¦å³å­æ ‘æœ‰ä¸€ä¸ªæ˜¯ä¸‰å‰èŠ‚ç‚¹çš„è¯ï¼Œå¿…å®šå·²ç»+1äº†ï¼ŒåŠ ä¸Šå‡è®¾çˆ¶èŠ‚ç‚¹æœ‰å¯¼èˆªå™¨ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¸ç”¨åŠ äº†
                    self.ans += 1
                self.s = not (l and r)  # self.sä¸ºæœ€åè®¡ç®—çš„ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘çš„ä¸‰å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘çŠ¶æ€ï¼Œåˆç”±äºæ˜¯å­˜åœ¨å·¦å³å­æ ‘æ‰èƒ½è®¡ç®—åˆ°self.sæ‰€ä»¥éä¸‰å‰èŠ‚ç‚¹ä¸ä¼šè€ƒè™‘
                return 1
            return l or r

        l, r = dfs(root.left), dfs(root.right)
        if not l or not r: #å·¦å³å­æ ‘åªæœ‰ä¸€æ£µæ˜¯ä¸‰å‰èŠ‚ç‚¹
            self.ans+=self.s
        return self.ans

