# ç»™ä½  k æšç›¸åŒçš„é¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä»ç¬¬ 1 å±‚åˆ°ç¬¬ n å±‚å…±æœ‰ n å±‚æ¥¼çš„å»ºç­‘ã€‚
#
#  å·²çŸ¥å­˜åœ¨æ¥¼å±‚ f ï¼Œæ»¡è¶³ 0 <= f <= n ï¼Œä»»ä½•ä» é«˜äº f çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» f æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚
#
#  æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å–ä¸€æšæ²¡æœ‰ç¢çš„é¸¡è›‹å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ x æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= x <= nï¼‰ã€‚å¦‚æœé¸¡è›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æ¬¡ä½¿ç”¨å®ƒã€‚å¦‚æœæŸæšé¸¡è›‹æ‰”ä¸‹åæ²¡æœ‰æ‘”ç¢
# ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åçš„æ“ä½œä¸­ é‡å¤ä½¿ç”¨ è¿™æšé¸¡è›‹ã€‚
#
#  è¯·ä½ è®¡ç®—å¹¶è¿”å›è¦ç¡®å®š f ç¡®åˆ‡çš„å€¼ çš„ æœ€å°æ“ä½œæ¬¡æ•° æ˜¯å¤šå°‘ï¼Ÿ
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#
# è¾“å…¥ï¼šk = 1, n = 2
# è¾“å‡ºï¼š2
# è§£é‡Šï¼š
# é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 0 ã€‚
# å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 1 ã€‚
# å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¾—å‡º f = 2 ã€‚
# å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š f æ˜¯å¤šå°‘ã€‚
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#
# è¾“å…¥ï¼šk = 2, n = 6
# è¾“å‡ºï¼š3
#
#
#  ç¤ºä¾‹ 3ï¼š
#
#
# è¾“å…¥ï¼šk = 3, n = 14
# è¾“å‡ºï¼š4
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= k <= 100
#  1 <= n <= 104
#
#  Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’
#  ğŸ‘ 617 ğŸ‘ 0

# äºŒåˆ†+åŠ¨æ€è§„åˆ’
import collections


class Solution:
    def superEggDrop(self, k: int, n: int) -> int:
        m = {}

        def dp(k, n):
            if k == 0 or n == 0:
                return 0
            elif k == 1:
                return n
            if (k, n) in m:
                return m[k, n]
            l, r = 1, n + 1
            while l < r:
                mid = (l + r) // 2
                f1 = dp(k - 1, mid - 1)
                f2 = dp(k, n - mid)
                if f1 < f2:
                    l = mid + 1
                else:
                    r = mid
            a = dp(k - 1, l - 1)
            b = dp(k, n - l)
            if a == b:  # lä»£è¡¨ç¬¬ä¸€ä¸ªf1>=f2çš„xå€¼ï¼Œå¦‚æœæ˜¯ç›¸ç­‰çš„é‚£ä¹ˆlå¯èƒ½å¤„äºå·¦ç«¯ç‚¹ï¼Œå°±ä¸èƒ½å»å–n-1çš„æ•°äº†
                ans = 1 + a
            elif a > b:
                ans = 1 + min(max(dp(k - 1, x - 1), dp(k, n - x)) for x in (l, l - 1))
            m[k, n] = ans
            return ans

        return dp(k, n)


# 2 å†³ç­–å•è°ƒæ€§

class Solution:
    def superEggDrop(self, k: int, n: int) -> int:
        dp = list(range(n + 1))  # dp ä»£è¡¨k-1ï¼Œx
        dp2 = [0] * (n + 1)  # dp2 ä»£è¡¨kï¼Œx, ç¬¬ä¸€æ¬¡å¯ä»¥éƒ½åˆå§‹åŒ–ä¸º0 æˆ–ä¸dpç›¸åŒ å› ä¸ºç¬¬ä¸€æ¬¡éå†åˆ°éƒ½æ˜¯å–max(dp,dp2)ç»“æœæ˜¯ä¸€æ ·çš„
        for k in range(2, k + 1):
            x = 1  # å›ºå®škä¹‹åï¼Œéšç€må¢å¤§ï¼Œæœ€ä½³å†³ç­–ç‚¹åªèƒ½ä¸æ–­å³ç§»
            for m in range(1, n + 1):
                while x < m and max(dp[x - 1], dp2[m - x]) >= max(dp[x], dp2[m - x - 1]):  # æ‰¾æ³¢è°·ç‚¹
                    x += 1
                dp2[m] = 1 + max(dp[x - 1], dp2[m - x])
            dp = dp2[:]
        return dp[-1]


# 3é€†å‘æ€ç»´
# è€ƒè™‘f(t,k) æ“ä½œtæ¬¡ï¼Œkæšé¸¡è›‹æœ€é«˜å¯ä»¥æ£€æµ‹åˆ°å¤šå°‘å±‚
class Solution:
    def superEggDrop(self, k: int, n: int) -> int:
        f = [[0] * (k + 1) for _ in range(n + 1)]  # tä¸ä¼šå¤§äºn
        for i in range(k + 1):
            f[1][i] = 1
        if k == 1:
            return n
        elif n == 1:
            return 1
        for i in range(2, n + 1):
            for j in range(1, k + 1):
                if j == 1:
                    f[i][j] = i
                else:
                    f[i][j] = 1 + f[i - 1][j - 1] + f[i - 1][j]
                if f[i][j] >= n:
                    return i


Solution().superEggDrop(k=1, n=1)
