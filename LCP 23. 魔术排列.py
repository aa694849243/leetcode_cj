# -*- coding: utf-8 -*-
from typing import List


# ç§‹æ—¥å¸‚é›†ä¸Šï¼Œé­”æœ¯å¸ˆé‚€è¯·å°æ‰£ä¸ä»–äº’åŠ¨ã€‚é­”æœ¯å¸ˆçš„é“å…·ä¸ºåˆ†åˆ«å†™æœ‰æ•°å­— `1~N` çš„ `N` å¼ å¡ç‰Œï¼Œç„¶åè¯·å°æ‰£æ€è€ƒä¸€ä¸ª `N` å¼ å¡ç‰Œçš„æ’åˆ— `target`ã€‚
#
#
# é­”æœ¯å¸ˆçš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ•°å­— kï¼ˆk >= 1ï¼‰ï¼Œä½¿å¾—åˆå§‹æ’åˆ—é¡ºåºä¸º `1~N` çš„å¡ç‰Œç»è¿‡ç‰¹æ®Šçš„æ´—ç‰Œæ–¹å¼æœ€ç»ˆå˜æˆå°æ‰£æ‰€æƒ³çš„æ’åˆ— `target`ï¼Œç‰¹æ®Šçš„æ´—ç‰Œ
# æ–¹å¼ä¸ºï¼š
# - ç¬¬ä¸€æ­¥ï¼Œé­”æœ¯å¸ˆå°†å½“å‰ä½äº **å¶æ•°ä½ç½®** çš„å¡ç‰Œï¼ˆä¸‹æ ‡è‡ª 1 å¼€å§‹ï¼‰ï¼Œä¿æŒ **å½“å‰æ’åˆ—é¡ºåº** æ”¾åœ¨ä½äº **å¥‡æ•°ä½ç½®** çš„å¡ç‰Œä¹‹å‰ã€‚ä¾‹å¦‚ï¼šå°†å½“å‰
# æ’åˆ— [1,2,3,4,5] ä½äºå¶æ•°ä½ç½®çš„ [2,4] ç½®äºå¥‡æ•°ä½ç½®çš„ [1,3,5] å‰ï¼Œæ’åˆ—å˜ä¸º [2,4,1,3,5]ï¼›
# - ç¬¬äºŒæ­¥ï¼Œè‹¥å½“å‰å¡ç‰Œæ•°é‡å°äºç­‰äº `k`ï¼Œåˆ™é­”æœ¯å¸ˆæŒ‰æ’åˆ—é¡ºåºå–èµ°å…¨éƒ¨å¡ç‰Œï¼›è‹¥å½“å‰å¡ç‰Œæ•°é‡å¤§äº `k`ï¼Œåˆ™å–èµ°å‰ `k` å¼ å¡ç‰Œï¼Œå‰©ä½™å¡ç‰Œç»§ç»­é‡å¤è¿™ä¸¤ä¸ªæ­¥éª¤
# ï¼Œç›´è‡³æ‰€æœ‰å¡ç‰Œå…¨éƒ¨è¢«å–èµ°ï¼›
#
# å¡ç‰ŒæŒ‰ç…§é­”æœ¯å¸ˆå–èµ°é¡ºåºæ„æˆçš„æ–°æ’åˆ—ä¸ºã€Œé­”æœ¯å–æ•°æ’åˆ—ã€ï¼Œè¯·è¿”å›æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°å­— k ä½¿å¾—ã€Œé­”æœ¯å–æ•°æ’åˆ—ã€æ°å¥½å°±æ˜¯ `target`ï¼Œä»è€Œè®©å°æ‰£æ„Ÿåˆ°å¤§åƒä¸€æƒŠã€‚
#
# **ç¤ºä¾‹ 1ï¼š**
# >è¾“å…¥ï¼š`target = [2,4,3,1,5]`
# >
# >è¾“å‡ºï¼š`true`
# >
# >è§£é‡Šï¼šæ’åˆ— target é•¿åº¦ä¸º 5ï¼Œåˆå§‹æ’åˆ—ä¸ºï¼š1,2,3,4,5ã€‚æˆ‘ä»¬é€‰æ‹© k = 2ï¼š
# >ç¬¬ä¸€æ¬¡ï¼šå°†å½“å‰æ’åˆ— [1,2,3,4,5] ä½äºå¶æ•°ä½ç½®çš„ [2,4] ç½®äºå¥‡æ•°ä½ç½®çš„ [1,3,5] å‰ï¼Œæ’åˆ—å˜ä¸º [2,4,1,3,5]ã€‚å–èµ°å‰ 2
# å¼ å¡ç‰Œ 2,4ï¼Œå‰©ä½™ [1,3,5]ï¼›
# >ç¬¬äºŒæ¬¡ï¼šå°†å½“å‰æ’åˆ— [1,3,5] ä½äºå¶æ•°ä½ç½®çš„ [3] ç½®äºå¥‡æ•°ä½ç½®çš„ [1,5] å‰ï¼Œæ’åˆ—å˜ä¸º [3,1,5]ã€‚å–èµ°å‰ 2 å¼  3,1ï¼Œå‰©ä½™ [5]
# ï¼›
# >ç¬¬ä¸‰æ¬¡ï¼šå½“å‰æ’åˆ—ä¸º [5]ï¼Œå…¨éƒ¨å–å‡ºã€‚
# >æœ€åï¼Œæ•°å­—æŒ‰ç…§å–å‡ºé¡ºåºæ„æˆçš„ã€Œé­”æœ¯å–æ•°æ’åˆ—ã€2,4,3,1,5 æ°å¥½ä¸º targetã€‚
#
# **ç¤ºä¾‹ 2ï¼š**
# >è¾“å…¥ï¼š`target = [5,4,3,2,1]`
# >
# >è¾“å‡ºï¼š`false`
# >
# >è§£é‡Šï¼šæ— æ³•æ‰¾åˆ°ä¸€ä¸ªæ•°å­— k å¯ä»¥ä½¿ã€Œé­”æœ¯å–æ•°æ’åˆ—ã€æ°å¥½ä¸º targetã€‚
#
#
# **æç¤ºï¼š**
# - `1 <= target.length = N <= 5000`
# - é¢˜ç›®ä¿è¯ `target` æ˜¯ `1~N` çš„ä¸€ä¸ªæ’åˆ—ã€‚ Related Topics é˜Ÿåˆ— æ•°ç»„ æ¨¡æ‹Ÿ
#  ğŸ‘ 15 ğŸ‘ 0


class Solution:
    def isMagic(self, target: List[int]) -> bool:
        li = list(range(1, len(target) + 1))
        li = li[1::2] + li[::2]
        k = 0
        for i in range(len(target)):
            if target[i] == li[i]:
                k += 1
            else:
                break
        if k==0:
            return False
        li = li[k:]
        target = target[k:]
        while li:
            li = li[1::2] + li[::2]
            if li[:k] != target[:k]:
                return False
            li=li[k:]
            target=target[k:]
        return True
Solution().isMagic([2,4,3,1,5])