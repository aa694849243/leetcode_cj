#!/usr/bin/env python
# -*- coding: utf-8 -*-
from typing import List


# ç»™ä½ ä¸€ä¸ªåªåŒ…å« 0 å’Œ 1 çš„ rows * columns çŸ©é˜µ mat ï¼Œè¯·ä½ è¿”å›æœ‰å¤šå°‘ä¸ª å­çŸ©å½¢ çš„å…ƒç´ å…¨éƒ¨éƒ½æ˜¯ 1 ã€‚
#
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#
# è¾“å…¥ï¼šmat = [[1,0,1],
# Â            [1,1,0],
# Â            [1,1,0]]
# è¾“å‡ºï¼š13
# è§£é‡Šï¼š
# æœ‰ 6Â ä¸ª 1x1 çš„çŸ©å½¢ã€‚
# æœ‰ 2 ä¸ª 1x2 çš„çŸ©å½¢ã€‚
# æœ‰ 3 ä¸ª 2x1 çš„çŸ©å½¢ã€‚
# æœ‰ 1 ä¸ª 2x2 çš„çŸ©å½¢ã€‚
# æœ‰ 1 ä¸ª 3x1 çš„çŸ©å½¢ã€‚
# çŸ©å½¢æ•°ç›®æ€»å…± = 6 + 2 + 3 + 1 + 1 = 13Â ã€‚
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#
# è¾“å…¥ï¼šmat = [[0,1,1,0],
# Â            [0,1,1,1],
# Â            [1,1,1,0]]
# è¾“å‡ºï¼š24
# è§£é‡Šï¼š
# æœ‰ 8 ä¸ª 1x1 çš„å­çŸ©å½¢ã€‚
# æœ‰ 5 ä¸ª 1x2 çš„å­çŸ©å½¢ã€‚
# æœ‰ 2 ä¸ª 1x3 çš„å­çŸ©å½¢ã€‚
# æœ‰ 4 ä¸ª 2x1 çš„å­çŸ©å½¢ã€‚
# æœ‰ 2 ä¸ª 2x2 çš„å­çŸ©å½¢ã€‚
# æœ‰ 2 ä¸ª 3x1 çš„å­çŸ©å½¢ã€‚
# æœ‰ 1 ä¸ª 3x2 çš„å­çŸ©å½¢ã€‚
# çŸ©å½¢æ•°ç›®æ€»å…± = 8 + 5 + 2 + 4 + 2 + 2 + 1 = 24 ã€‚
#
#
#  ç¤ºä¾‹ 3ï¼š
#
#
# è¾“å…¥ï¼šmat = [[1,1,1,1,1,1]]
# è¾“å‡ºï¼š21
#
#
#  ç¤ºä¾‹ 4ï¼š
#
#
# è¾“å…¥ï¼šmat = [[1,0,1],[0,1,0],[1,0,1]]
# è¾“å‡ºï¼š5
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= rows <= 150
#  1 <= columns <= 150
#  0 <= mat[i][j] <= 1
#
#  Related Topics æ ˆ æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ å•è°ƒæ ˆ
#  ğŸ‘ 120 ğŸ‘ 0


class Solution:
    def numSubmat(self, mat: List[List[int]]) -> int:
        for row in mat:
            for c in range(len(row)):
                if c == 0 or row[c] == 0:
                    continue
                else:
                    row[c] = row[c - 1] + 1
        res = 0
        R, C = len(mat), len(mat[0])
        for r in range(R):
            for c in range(C):
                tmp = mat[r][c]
                for p in range(r, -1, -1):
                    tmp = min(mat[p][c], tmp)
                    if tmp == 0:
                        break
                    res += tmp
        return res


Solution().numSubmat([[0, 1, 1, 0], [0, 1, 1, 1], [1, 1, 1, 0]])
