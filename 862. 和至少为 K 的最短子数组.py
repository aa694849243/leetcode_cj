# è¿”å› A çš„æœ€çŸ­çš„éç©ºè¿ç»­å­æ•°ç»„çš„é•¿åº¦ï¼Œè¯¥å­æ•°ç»„çš„å’Œè‡³å°‘ä¸º K ã€‚
#
#  å¦‚æœæ²¡æœ‰å’Œè‡³å°‘ä¸º K çš„éç©ºå­æ•°ç»„ï¼Œè¿”å› -1 ã€‚
#
#
#
#
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#  è¾“å…¥ï¼šA = [1], K = 1
# è¾“å‡ºï¼š1
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#  è¾“å…¥ï¼šA = [1,2], K = 4
# è¾“å‡ºï¼š-1
#
#
#  ç¤ºä¾‹ 3ï¼š
#
#  è¾“å…¥ï¼šA = [2,-1,2], K = 3
# è¾“å‡ºï¼š3
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= A.length <= 50000
#  -10 ^ 5 <= A[i] <= 10 ^ 5
#  1 <= K <= 10 ^ 9
#
#  Related Topics é˜Ÿåˆ— äºŒåˆ†æŸ¥æ‰¾
#  ğŸ‘ 277 ğŸ‘ 0

from typing import List
import itertools
import collections


# 1å•è°ƒé˜Ÿåˆ—
# ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—å­˜å‚¨ç´¯åŠ å’Œçš„ä¸‹æ ‡ï¼Œç´¯åŠ å’Œéœ€è¦é€’å¢ï¼Œå› ä¸ºæ¯æ¬¡å…¥é˜Ÿä¸€ä¸ªæ•°ä½œä¸ºç»ˆç‚¹ï¼Œå¦‚æœä¸‹æ»‘é‚£ä¹ˆè¿™ä¸ªæ•°æ˜¯ä¸ç”¨è€ƒè™‘çš„ï¼Œå› ä¸ºå‰é¢é‚£ä¸ªæ•°æ›´ä½³ï¼Œå‡ºé˜Ÿæ—¶å°½é‡ç¼©å‡çª—å£,æ²¡æœ‰ä¿å­˜åœ¨é˜Ÿåˆ—é‡Œçš„æ•°éƒ½æ˜¯ä¸ç”¨è€ƒè™‘çš„ï¼Œå› ä¸ºé˜Ÿåˆ—æ¯æ¬¡å…¥é˜Ÿä¸€ä¸ªæ•°éƒ½éœ€è¦å¼¹å‡ºæ¯”å…¥é˜Ÿå…ƒç´ å°çš„å…ƒç´ ï¼Œé‚£å°±æ„å‘³ç€å¦‚æœè¿™ä¸ªå…ƒç´ ä¿å­˜åœ¨é˜Ÿåˆ—é‡Œï¼Œåé¢ä¸ä¼šæœ‰æ¯”è¿™ä¸ªå…ƒç´ æ›´å°çš„æ•°äº†ï¼Œå› ä¸ºå¦‚æœåé¢å…¥é˜Ÿæ›´å°çš„æ•°ï¼Œé‚£å‰ä¸€ä¸ªæ•°ä¸€å®šä¼šå¼¹å‡ºï¼Œé‚£è¿™å‰ä¸€ä¸ªæ•°å°±ä¸ä¼šä¿å­˜åœ¨é˜Ÿåˆ—é‡Œäº†
class Solution:
    def shortestSubarray(self, A: List[int], K: int) -> int:
        cum = [0] + [*itertools.accumulate(A)]
        q = collections.deque()
        ans = len(cum)
        q.append(0)
        for i, num in enumerate(cum[1:], 1):
            flag = -1
            while q and num <= cum[q[-1]]:
                q.pop()
            q.append(i)
            while q and cum[q[0]] + K <= num:
                flag = q.popleft()
            if flag >= 0:
                ans = min(ans, i - flag)
        return ans if ans < len(cum) else -1


Solution().shortestSubarray([84,-37,32,40,95], 167)
