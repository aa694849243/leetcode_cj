# -*- coding: utf-8 -*-
import bisect
import collections
from typing import List


# ç»™ä½ ä¸€ä¸ªæ•°ç»„ eventsï¼Œå…¶ä¸­ events[i] = [startDayi, endDayi] ï¼Œè¡¨ç¤ºä¼šè®® i å¼€å§‹äº startDayi ï¼Œç»“æŸäº e
# ndDayi ã€‚
#
#  ä½ å¯ä»¥åœ¨æ»¡è¶³ startDayi <= d <= endDayi ä¸­çš„ä»»æ„ä¸€å¤© d å‚åŠ ä¼šè®® i ã€‚æ³¨æ„ï¼Œä¸€å¤©åªèƒ½å‚åŠ ä¸€ä¸ªä¼šè®®ã€‚
#
#  è¯·ä½ è¿”å›ä½ å¯ä»¥å‚åŠ çš„ æœ€å¤§ ä¼šè®®æ•°ç›®ã€‚
#
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#
#
#  è¾“å…¥ï¼ševents = [[1,2],[2,3],[3,4]]
# è¾“å‡ºï¼š3
# è§£é‡Šï¼šä½ å¯ä»¥å‚åŠ æ‰€æœ‰çš„ä¸‰ä¸ªä¼šè®®ã€‚
# å®‰æ’ä¼šè®®çš„ä¸€ç§æ–¹æ¡ˆå¦‚ä¸Šå›¾ã€‚
# ç¬¬ 1 å¤©å‚åŠ ç¬¬ä¸€ä¸ªä¼šè®®ã€‚
# ç¬¬ 2 å¤©å‚åŠ ç¬¬äºŒä¸ªä¼šè®®ã€‚
# ç¬¬ 3 å¤©å‚åŠ ç¬¬ä¸‰ä¸ªä¼šè®®ã€‚
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#  è¾“å…¥ï¼ševents= [[1,2],[2,3],[3,4],[1,2]]
# è¾“å‡ºï¼š4
#
#
#  ç¤ºä¾‹ 3ï¼š
#
#  è¾“å…¥ï¼ševents = [[1,4],[4,4],[2,2],[3,4],[1,1]]
# è¾“å‡ºï¼š4
#
#
#  ç¤ºä¾‹ 4ï¼š
#
#  è¾“å…¥ï¼ševents = [[1,100000]]
# è¾“å‡ºï¼š1
#
#
#  ç¤ºä¾‹ 5ï¼š
#
#  è¾“å…¥ï¼ševents = [[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7]]
# è¾“å‡ºï¼š7
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= events.length <= 10^5
#  events[i].length == 2
#  1 <= events[i][0] <= events[i][1] <= 10^5
#
#  Related Topics è´ªå¿ƒ æ•°ç»„ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
#  ğŸ‘ 150 ğŸ‘ 0

#è´ªå¿ƒ+é€†å‘æ€ç»´
class Solution:
    def maxEvents(self, events: List[List[int]]) -> int:
        events.sort(key=lambda x: x[1]) #æ ¹æ®ç»“æŸæ—¥æœŸæ’åº
        first_day=min(x[0] for x in events)
        second_day=max(x[1] for x in events)
        arr=list(range(first_day,second_day+1)) #æœ€æ—©åˆ°æœ€æ™šåšæˆä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸€å¤©å‚åŠ ä¸€ä¸ªäº‹ä»¶
        ans=0
        for s,e in events: #eventsæ ¹æ®enddayæ’åºï¼Œæˆ‘ä»¬å…ˆæ‰¾ç»“æŸæ—©çš„ï¼Œæ‰¾ç¦»å®ƒå¼€å§‹æ—¶é—´æœ€è¿‘çš„ä¸€å¤©
            index=bisect.bisect_left(arr,s)
            if index==len(arr) or e<arr[index]: #å¦‚æœåˆ—è¡¨é‡Œæ‰€æœ‰æ—¶é—´éƒ½å°äºå¼€å§‹æ—¶é—´æˆ–è€…æ‰¾åˆ°çš„äº‹ä»¶æ—¶é—´å¤§äºç»“æŸæ—¶é—´ï¼Œåˆ™æ”¾å¼ƒè¿™ä¸ªä¼šè®®
                continue
            del arr[index]
            ans+=1
        return ans



Solution().maxEvents([[1,5],[1,5],[1,5],[2,3],[2,3]])
