# -*- coding: utf-8 -*-
from typing import List


# ä¸ºäº†ç»™åˆ·é¢˜çš„åŒå­¦ä¸€äº›å¥–åŠ±ï¼ŒåŠ›æ‰£å›¢é˜Ÿå¼•å…¥äº†ä¸€ä¸ªå¼¹ç°§æ¸¸æˆæœºã€‚æ¸¸æˆæœºç”± N ä¸ªç‰¹æ®Šå¼¹ç°§æ’æˆä¸€æ’ï¼Œç¼–å·ä¸º 0 åˆ° N-1ã€‚åˆå§‹æœ‰ä¸€ä¸ªå°çƒåœ¨ç¼–å· 0 çš„å¼¹ç°§å¤„ã€‚è‹¥å°çƒ
# åœ¨ç¼–å·ä¸º i çš„å¼¹ç°§å¤„ï¼Œé€šè¿‡æŒ‰åŠ¨å¼¹ç°§ï¼Œå¯ä»¥é€‰æ‹©æŠŠå°çƒå‘å³å¼¹å°„ jump[i] çš„è·ç¦»ï¼Œæˆ–è€…å‘å·¦å¼¹å°„åˆ°ä»»æ„å·¦ä¾§å¼¹ç°§çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¼–å·ä¸º i å¼¹ç°§å¤„æŒ‰åŠ¨å¼¹ç°§ï¼Œ
# å°çƒå¯ä»¥å¼¹å‘ 0 åˆ° i-1 ä¸­ä»»æ„å¼¹ç°§æˆ–è€… i+jump[i] çš„å¼¹ç°§ï¼ˆè‹¥ i+jump[i]>=N ï¼Œåˆ™è¡¨ç¤ºå°çƒå¼¹å‡ºäº†æœºå™¨ï¼‰ã€‚å°çƒä½äºç¼–å· 0 å¤„çš„å¼¹ç°§æ—¶ä¸
# èƒ½å†å‘å·¦å¼¹ã€‚
#
#  ä¸ºäº†è·å¾—å¥–åŠ±ï¼Œä½ éœ€è¦å°†å°çƒå¼¹å‡ºæœºå™¨ã€‚è¯·æ±‚å‡ºæœ€å°‘éœ€è¦æŒ‰åŠ¨å¤šå°‘æ¬¡å¼¹ç°§ï¼Œå¯ä»¥å°†å°çƒä»ç¼–å· 0 å¼¹ç°§å¼¹å‡ºæ•´ä¸ªæœºå™¨ï¼Œå³å‘å³è¶Šè¿‡ç¼–å· N-1 çš„å¼¹ç°§ã€‚
#
#  ç¤ºä¾‹ 1ï¼š
#
#
#  è¾“å…¥ï¼šjump = [2, 5, 1, 1, 1, 1]
#
#  è¾“å‡ºï¼š3
#
#  è§£é‡Šï¼šå° Z æœ€å°‘éœ€è¦æŒ‰åŠ¨ 3 æ¬¡å¼¹ç°§ï¼Œå°çƒä¾æ¬¡åˆ°è¾¾çš„é¡ºåºä¸º 0 -> 2 -> 1 -> 6ï¼Œæœ€ç»ˆå°çƒå¼¹å‡ºäº†æœºå™¨ã€‚
#
#
#  é™åˆ¶ï¼š
#
#
#  1 <= jump.length <= 10^6
#  1 <= jump[i] <= 10000
#
#  Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ çº¿æ®µæ ‘ æ•°ç»„ åŠ¨æ€è§„åˆ’
#  ğŸ‘ 52 ğŸ‘ 0

# 1dp
class Solution:
    def minJump(self, jump: List[int]) -> int:
        n = len(jump)
        f = [n] * (n + 1)
        f[0] = 0
        maxdis = [0] * (n + 1)
        curstep = 0
        ans = n
        for i, val in enumerate(jump):
            if i > maxdis[curstep]:  # ç›®å‰çš„æ­¥æ•°åˆ°è¾¾æœ€è¿œçš„åœ°æ–¹,å¦‚æœå½“å‰æ­¥æ•°åˆ°è¾¾ä¸äº†iï¼Œé‚£ä¹ˆå¢åŠ ä¸€æ­¥ï¼Œå› ä¸ºcurstepè‡³å°‘å¯ä»¥åˆ°è¾¾i-1ï¼Œæ‰€ä»¥curstep+1ä¸€å®šå¯ä»¥åˆ°è¾¾æˆ–è¶…è¶Ši
                curstep += 1
            f[i] = min(f[i], curstep + 1)  # å‡å¦‚maxdis[step]è¶…è¶Šiï¼Œåˆ™ç­‰å¼æˆç«‹ï¼Œå¦‚æœmaxdis[step]==i,è¯´æ˜ä¹‹å‰è‡³å°‘å°†f[i]æ›´æ–°ä¸ºstepäº†
            nxtjump = i + val
            if i + val >= n:
                ans = min(f[i] + 1, ans)
            else:
                maxdis[f[i] + 1] = max(nxtjump, maxdis[f[i] + 1])  # åˆ°è¾¾f[i]çš„æœ€å°æ­¥æ•°+1åå³å¯æ›´æ–°ä¸‹ä¸€ä¸ªstepçš„æœ€é•¿è·ç¦»
                # æ¯æ¬¡æ›´æ–°çš„éƒ½æ˜¯ä¸‹ä¸€æ­¥æˆ–ä¸‹ä¸¤æ­¥çš„æœ€å¤§è·ç¦»ï¼Œæ‰€ä»¥å½“å‰è½®æ¬¡çš„æœ€è¿œè·ç¦»ä¸ä¼šè¢«æ”¹å˜ã€‚åˆå› ä¸ºcurstep+1æ­¥å‡å¦‚æ¯”curstep+2æ­¥è·³çš„æ›´è¿œçš„è¯ï¼Œéå†åˆ°curstep+1æ­¥æ—¶å°±ä¼šåŠæ—¶æ›´æ–°curstep+2æ­¥çš„å€¼
                f[nxtjump] = min(f[nxtjump], f[i] + 1)
        return ans


class Solution:
    def minJump(self, jump: List[int]) -> int:
        n = len(jump)
        step = 0
        t = [0]
        far = 1
        visted = [False] * (n + 1)
        visted[0]=True
        while True:
            tree = []
            for i in t:
                e = jump[i] + i
                if e >= n:
                    return step+1
                for nxt in range(far, i):
                    if not visted[nxt]:
                        tree.append(nxt)
                        visted[nxt]=True
                if not visted[e]:
                    visted[e]=True
                    tree.append(e)
                far=max(i+1,far)
            step+=1
            t=tree



Solution().minJump([3, 7, 6, 1, 4, 3, 7, 8, 1, 2])
