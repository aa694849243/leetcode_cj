# -*- coding: utf-8 -*-
# authorï¼š caoji
# datetimeï¼š 2022-08-25 21:04 
# ideï¼š PyCharm
# åœ¨ä¸€æ¡å•è½¦é“ä¸Šæœ‰ n è¾†è½¦ï¼Œå®ƒä»¬æœç€åŒæ ·çš„æ–¹å‘è¡Œé©¶ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ cars ï¼Œå…¶ä¸­ cars[i] = [positioni, speedi]
#  ï¼Œå®ƒè¡¨ç¤ºï¼š
#
#
#  positioni æ˜¯ç¬¬ i è¾†è½¦å’Œé“è·¯èµ·ç‚¹ä¹‹é—´çš„è·ç¦»ï¼ˆå•ä½ï¼šç±³ï¼‰ã€‚é¢˜ç›®ä¿è¯ positioni < positioni+1 ã€‚
#  speedi æ˜¯ç¬¬ i è¾†è½¦çš„åˆå§‹é€Ÿåº¦ï¼ˆå•ä½ï¼šç±³/ç§’ï¼‰ã€‚
#
#
#  ç®€å•èµ·è§ï¼Œæ‰€æœ‰è½¦å­å¯ä»¥è§†ä¸ºåœ¨æ•°è½´ä¸Šç§»åŠ¨çš„ç‚¹ã€‚å½“ä¸¤è¾†è½¦å æ®åŒä¸€ä¸ªä½ç½®æ—¶ï¼Œæˆ‘ä»¬ç§°å®ƒä»¬ç›¸é‡äº†ã€‚ä¸€æ—¦ä¸¤è¾†è½¦ç›¸é‡ï¼Œå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ªè½¦é˜Ÿï¼Œè¿™ä¸ªè½¦é˜Ÿé‡Œçš„è½¦æœ‰ç€åŒæ ·çš„ä½ç½®
# å’Œç›¸åŒçš„é€Ÿåº¦ï¼Œé€Ÿåº¦ä¸ºè¿™ä¸ªè½¦é˜Ÿé‡Œ æœ€æ…¢ ä¸€è¾†è½¦çš„é€Ÿåº¦ã€‚
#
#  è¯·ä½ è¿”å›ä¸€ä¸ªæ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯ç¬¬ i è¾†è½¦ä¸ä¸‹ä¸€è¾†è½¦ç›¸é‡çš„æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œå¦‚æœè¿™è¾†è½¦ä¸ä¼šä¸ä¸‹ä¸€è¾†è½¦ç›¸é‡ï¼Œåˆ™
# answer[i] ä¸º -1 ã€‚ç­”æ¡ˆç²¾åº¦è¯¯å·®éœ€åœ¨ 10â»âµ ä»¥å†…ã€‚
#
#
#
#  ç¤ºä¾‹ 1ï¼š
#
#
# è¾“å…¥ï¼šcars = [[1,2],[2,1],[4,3],[7,2]]
# è¾“å‡ºï¼š[1.00000,-1.00000,3.00000,-1.00000]
# è§£é‡Šï¼šç»è¿‡æ°å¥½ 1 ç§’ä»¥åï¼Œç¬¬ä¸€è¾†è½¦ä¼šä¸ç¬¬äºŒè¾†è½¦ç›¸é‡ï¼Œå¹¶å½¢æˆä¸€ä¸ª 1 m/s çš„è½¦é˜Ÿã€‚ç»è¿‡æ°å¥½ 3 ç§’ä»¥åï¼Œç¬¬ä¸‰è¾†è½¦ä¼šä¸ç¬¬å››è¾†è½¦ç›¸é‡ï¼Œå¹¶å½¢æˆä¸€ä¸ª 2 m/
# s çš„è½¦é˜Ÿã€‚
#
#
#  ç¤ºä¾‹ 2ï¼š
#
#
# è¾“å…¥ï¼šcars = [[3,4],[5,4],[6,3],[9,1]]
# è¾“å‡ºï¼š[2.00000,1.00000,1.50000,-1.00000]
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= cars.length <= 10âµ
#  1 <= positioni, speedi <= 10â¶
#  positioni < positioni+1
#
#
#  Related Topics æ ˆ æ•°ç»„ æ•°å­¦ å•è°ƒæ ˆ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 63 ğŸ‘ 0

# https://leetcode.cn/problems/car-fleet-ii/solution/python-dan-diao-zhan-by-qin-qi-shu-hua-2-0k82/
# åå¾€å‰éå†å•è°ƒæ ˆ
# leetcode submit region begin(Prohibit modification and deletion)
from typing import List
class Solution:
    def getCollisionTimes(self, cars: List[List[int]]) -> List[float]:
        res = []
        cars = cars[::-1]  # ä»åå¾€å‰éå†
        stack = []
        for p, s in cars:
            while stack and stack[-1][1] >= s:  # é€Ÿåº¦é€’å¢
                stack.pop()
            if not stack:  # åé¢çš„è½¦é€Ÿå…¨å¤§äºå½“å‰è½¦é€Ÿï¼Œæ°¸è¿œæ— æ³•è¿½ä¸Š
                res.append(-1)
                stack.append((p, s, float('inf'))) #è¿½æ— ç©·çš„æ—¶é—´æ˜¯æ— ç©·çš„
            else:
                while stack and (t := (stack[-1][0] - p) / (s - stack[-1][1])) >= stack[-1][2]:  # åé¢çš„è½¦è¾†å…ˆç›¸æ’ï¼Œä¸å¿…ç†ä¼šã€‚ç»´æŠ¤å½“è½¦ä¸åè½¦ç›¸æ’æ—¶é—´ä¸ºæœ€çŸ­æ—¶é—´
                    stack.pop()
                stack.append((p, s, t))
                res.append(t)
        return res[::-1]

# leetcode submit region end(Prohibit modification and deletion)
print(Solution().getCollisionTimes([[1,2],[2,1],[4,3],[7,2]]))